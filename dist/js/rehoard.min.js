!function(e){function t(n){if(i[n])return i[n].exports;var s=i[n]={exports:{},id:n,loaded:!1};return e[n].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var s=i(3),r=n(s);e.exports=function(){return window.ReHoard?window.ReHoard:(window.ReHoard=new r["default"],window.ReHoard)}()},function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(){function e(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0];i(this,e),this.production=t}return n(e,[{key:"changeEnviroment",value:function(){var e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0];this.production=e}},{key:"error",value:function(e){this.production||console.error(e)}},{key:"warn",value:function(e){this.production||console.error(e)}},{key:"info",value:function(e){this.production||console.error(e)}},{key:"log",value:function(e){this.production||console.error(e)}},{key:"debug",value:function(e){this.production&&console.error(e)}}]),e}();t["default"]=s},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=i(1),a=n(u),c=function(){function e(){s(this,e),this.changeSettings(null),this._states={},this._actions_history=[],this._storageName="ReHoard",this._persistanceLoad(),this._willSubscribeWhenAlive=[],this._debug}return o(e,[{key:"changeSettings",value:function(e){this._settings={persistance:{persist:!e||!e.persist||e.persist,session:!e||!e.session||e.session,timeAlive:e&&e.timeAlive?e.timeAlive:1},undoRedo:!e||!e.undoRedo||e.undoRedo,actionsHistory:!e||!e.actionsHistory||e.actionsHistory,actionsHistoryLimit:e&&e.actionsHistoryLimit?e.actionsHistoryLimit:100,typeMutable:!(!e||!e.typeMutable)&&e.typeMutable,production:!e||!e.production||e.production},this._debug=new a["default"](this._settings.production)}},{key:"dispatch",value:function(e,t){var i=arguments.length<=2||void 0===arguments[2]?"":arguments[2],n=!1;if(!e||!t)return this._debug.error("Null parameters dispatched "),n;if("string"!=typeof i)return this._debug.error("An action must be a string type"),n;if(this._states.hasOwnProperty(e)){var s=this._states[e];this._update(s,e,t,i),this._notifysubscribers(s),n=!0}else this._create(e,t,i),n=!0;return this._persistanceSave(),n}},{key:"subscribeWhenBecomesAlive",value:function(e,t,i){return this._states.hasOwnProperty(e)&&t?this.subscribe(e,t):this._willSubscribeWhenAlive.push({name:e,listener:t,unSubscribeCB:i})}},{key:"subscribe",value:function(e,t){var i=this;if(!this._states.hasOwnProperty(e)||!t)return this._debug.warn(e+" does not exits yet... Cannot subscribe... :("),!1;var n=function(){var n=i._states[e],s=n.subscribers.push({listener:t,unSubscribeCB:void 0});return i._a_history(n,"Listener Subscribed"),{v:{unSubscribe:function(){i._unSubscribe(e,s)}}}}();return"object"===("undefined"==typeof n?"undefined":r(n))?n.v:void 0}},{key:"getCurrentState",value:function(e){var t=!1;if(this._states.hasOwnProperty(e)){var i=this._states[e];this._notifysubscribers(i),t=!0}else this._debug.warn("getCurrentState failed to find state, check your state name");return t}},{key:"deleteState",value:function(e){var t=!1;return this._states.hasOwnProperty(e)?(this._a_history(this._states[e],"State Deleted"),this._persistanceSave(),delete this._states[e],t=!this._states[e]):this._debug.error(e+" does not exits yet... Cannot delete"),t}},{key:"redo",value:function(e){var t=!1;if(this._settings.undoRedo&&e&&this._states.hasOwnProperty(e)){var i=this._states[e];if(i.redoStack.length>0){i.undoStack.push({value:i.value,action:i.actionReference});var n=i.redoStack.pop();i.value=n.value,i.actionReference=n.actionReference,this._a_history(i,"Redo"),this.getCurrentState(e),this._persistanceSave(),t=!0}}return t}},{key:"undo",value:function(e){var t=!1;if(this._settings.undoRedo&&e&&this._states.hasOwnProperty(e)){var i=this._states[e];if(i.undoStack.length>0){i.redoStack.push({value:i.value,action:i.actionReference});var n=i.undoStack.pop();i.value=n.value,i.actionReference=n.actionReference,this._a_history(i,"Undo"),this.getCurrentState(e),this._persistanceSave(),t=!0}}return t}},{key:"_unSubscribe",value:function(e,t){var i=!1;if(this._states.hasOwnProperty(e)&&e&&t){var n=this._states[e];n.subscribers[t-1]=null,this._a_history(n,"unSubcribed"),i=!0}else this._debug.warn(e+" does not exits yet... Cannot unSubcribe... :(");return i}},{key:"_create",value:function(e,t,i){var n=this._states[e]={};n.typeOfElement="undefined"==typeof t?"undefined":r(t),n.name=e,n.value=t,this._willSubscribeWhenAlive.length>0?this._willSubscribeCore(n):n.subscribers=[],n.action=i,this._settings.undoRedo&&(n.undoStack=[],n.redoStack=[]),this._notifysubscribers(n),this._a_history(n,"Created")}},{key:"_update",value:function(e,t,i,n){if(this._settings.typeMutable)e.typeOfElement="undefined"==typeof i?"undefined":r(i);else if(e.typeOfElement!==("undefined"==typeof i?"undefined":r(i)))return void this._debug.error("Error, mutability violated for: "+e.name);this._settings.undoRedo&&(e.undoStack.push({value:e.value,action:e.actionReference}),e.redoStack=[]),e.value=i,e.action=n,this._a_history(e,"Updated")}},{key:"_willSubscribeCore",value:function(e){var t=this,i=this._willSubscribeWhenAlive.filter(function(t){return t.name===e.name});this._willSubscribeWhenAlive=this._willSubscribeWhenAlive.filter(function(e){return i.indexOf(e)<0}),e.subscribers=i.map(function(e){return{listener:e.listener,unSubscribeCB:e.unSubscribeCB}}),e.subscribers.forEach(function(e,i){try{e.unSubscribeCB&&e.unSubscribeCB({unSubscribe:function(){t._unSubscribe(e.name,i)}})}catch(n){t._debug.warn(n)}})}},{key:"_notifysubscribers",value:function(e){if(e&&e.subscribers.length>0){for(var t=0;t<e.subscribers.length;t++)try{e.subscribers[t]&&null!==e.subscribers[t].listener&&e.subscribers[t].listener(e.value)}catch(i){this._debug.warn(e.subscribers[t].listener+" No longer in scope")}this._a_history(e,"Notified Subscribers")}}},{key:"_persistanceSave",value:function(){if(this._settings.persistance.persist){var e=void 0;e=this._settings.persistance.session?sessionStorage:localStorage;try{var t={date:new Date,states:this._states};e.setItem(this._storageName,JSON.stringify(t))}catch(i){console.log(i)}}}},{key:"_persistanceLoad",value:function(){if(this._settings.persistance.persist){var e=void 0;e=this._settings.persistance.session?sessionStorage:localStorage;try{var t=e.getItem(this._storageName);if(t){var i=JSON.parse(t),n=new Date(i.date);n.setDate(n.getDate()+this._settings.timeAlive),n<new Date?e.removeItem(this._storageName):this._states=Object.assign({},i.states)}}catch(s){this._debug.log(s)}}}},{key:"_a_history",value:function(e,t){this._settings.actionsHistory&&(this._actions_history.length>=this._settings.actionsHistoryLimit&&this._actions_history.splice(parseInt(0,parseInt(this._actions_history.length/2))),this._actions_history.push({action:t,state:Object.assign({},e),date:new Date}))}}]),e}();t["default"]=c},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=i(2),u=n(o),a=function(){function e(){s(this,e),this._reHoardPubSub=new u["default"],window.StateHub=this}return r(e,[{key:"changeSettings",value:function(e){this._reHoardPubSub.changeSettings(e)}},{key:"dispatch",value:function(e,t){var i=arguments.length<=2||void 0===arguments[2]?"":arguments[2];return this._reHoardPubSub.dispatch(e,t,i)}},{key:"subscribe",value:function(e,t){return this._reHoardPubSub.subscribe(e,t)}},{key:"subscribeWhenBecomesAlive",value:function(e,t,i){return this._reHoardPubSub.subscribeWhenBecomesAlive(e,t,i)}},{key:"getCurrentState",value:function(e){return this._reHoardPubSub.getCurrentState(e)}},{key:"deleteState",value:function(e){return this._reHoardPubSub.deleteState(e)}},{key:"redo",value:function(e){return this._reHoardPubSub.redo(e)}},{key:"undo",value:function(e){return this._reHoardPubSub.undo(e)}}]),e}();t["default"]=a}]);