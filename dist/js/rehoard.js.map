{"version":3,"sources":["webpack:///webpack/bootstrap ce699f693dc0322e6d0f","webpack:///./src/rehoard.js","webpack:///./src/rehoard/rehoard.js","webpack:///./src/rehoard/components/rehoardpubsub.js","webpack:///./src/rehoard/components/consolemessages.js"],"names":["module","exports","window","ReHoard","e","_reHoardPubSub","StateHub","settings","changeSettings","stateName","stateValue","_create","actionReference","dispatch","listener","subscribe","unSubscribeCB","subscribeWhenBecomesAlive","broadcastState","getCurrentValue","deleteState","redo","undo","ReHoardPubSub","_states","_actions_history","_storageName","_persistanceLoad","_willSubscribeWhenAlive","_debug","_settings","persistance","persist","session","timeAlive","undoRedo","actionsHistory","actionsHistoryLimit","typeMutable","production","success","error","hasOwnProperty","state","_update","_notifysubscribers","_persistanceSave","push","name","index","subscribers","undefined","_a_history","unSubscribe","_unSubscribe","warn","value","redoStack","length","undoStack","action","s","pop","getCurrentState","typeOfElement","_willSubscribeCore","splice","parseInt","jedis","filter","map","forEach","i","o","storage","sessionStorage","localStorage","data","date","Date","states","setItem","JSON","stringify","console","log","results","getItem","parse","setDate","getDate","removeItem","Object","assign","x","ConsoleMessages","text"],"mappings":"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","file":"rehoard.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap ce699f693dc0322e6d0f\n **/","\nimport ReHoard from './rehoard/rehoard.js';\n\n\nmodule.exports = (() => {\n    try {\n        window.ReHoard = ReHoard;\n        return window.ReHoard;\n    } catch (e) {\n        return ReHoard;\n    }\n})();\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/rehoard.js\n **/","import ReHoardPubSub from \"./components/rehoardpubsub.js\";\n\n\n\nexport default class ReHoard {\n    constructor() {\n        this._reHoardPubSub = new ReHoardPubSub();\n        window.StateHub = this;\n    }\n\n    /* Allow to change default settings. \n    settings = {\n            persist : true,\n            session : true,\n            timeAlive : 1,\n            undoRedo:  true,\n            actionsHistory: true,\n            actionsHistoryLimit:  100,\n            typeMutable: false,\n            production:  true\n       };\n   */\n    changeSettings(settings) {\n        this._reHoardPubSub.changeSettings(settings);\n    }\n\n    // Allows to create the state in a more explict way, a value must be passed to determine its type.\n    // Dispatch will handle creation, so this is not needed.\n    create(stateName, stateValue) {\n        return this._reHoardPubSub._create(stateName, stateValue, \"CREATION\");\n    }\n\n\n    // dispatch changes, this will broadcast to any subscribers.\n    // If state does not exists, it will create it, otherwise, it will update its value. \n    dispatch(stateName, stateValue, actionReference = \"\") {\n        return this._reHoardPubSub.dispatch(stateName, stateValue, actionReference);\n    }\n\n    // subcribes to an existing state, if it does not exists it will throw an exception. \n    subscribe(stateName, listener) {\n        return this._reHoardPubSub.subscribe(stateName, listener);\n    }\n\n    // will subscribe if the state exists, otherwise will queue it up once it is created. \n    subscribeWhenBecomesAlive(stateName, listener, unSubscribeCB) {\n        return this._reHoardPubSub.subscribeWhenBecomesAlive(stateName, listener, unSubscribeCB);\n    }\n\n    // force a broadcast of the current value to everyone\n    broadcastState(stateName) {\n        return this._reHoardPubSub.broadcastState(stateName);\n    }\n\n    // returns current value of the state sync. No broadcasting happens\n    getCurrentState(stateName) {\n        return this._reHoardPubSub.getCurrentValue(stateName);\n    }\n\n    // Delete the current state and its listeners.\n    deleteState(stateName) {\n        return this._reHoardPubSub.deleteState(stateName);\n    }\n\n    // Redo the value state + action \n    redo(stateName) {\n        return this._reHoardPubSub.redo(stateName);\n    }\n\n    // Undo the value to previous one\n    undo(stateName) {\n        return this._reHoardPubSub.undo(stateName);\n    }\n}\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/rehoard/rehoard.js\n **/","import ConsoleMessages from './consolemessages.js';\n\n\nexport default class ReHoardPubSub {\n\n    constructor() {\n        this.changeSettings(null);\n        this._states = {};\n        this._actions_history = [];\n        this._storageName = \"ReHoard\";\n        this._persistanceLoad();\n        this._willSubscribeWhenAlive = [];\n        this._debug;\n    }\n\n\n    changeSettings(settings) {\n\n        this._settings = {\n            persistance: {\n                persist: (settings && settings.persist ? settings.persist : true),\n                session: (settings && settings.session ? settings.session : true),\n                timeAlive: (settings && settings.timeAlive ? settings.timeAlive : 1)\n            },\n            undoRedo: (settings && settings.undoRedo ? settings.undoRedo : true),\n            actionsHistory: (settings && settings.actionsHistory ? settings.actionsHistory : true),\n            actionsHistoryLimit: (settings && settings.actionsHistoryLimit ? settings.actionsHistoryLimit : 100),\n            typeMutable: (settings && settings.typeMutable ? settings.typeMutable : false),\n            production: (settings && settings.production ? settings.production : true)\n        };\n        this._debug = new ConsoleMessages(this._settings.production);\n    }\n\n    dispatch(stateName, stateValue, actionReference = \"\") {\n        let success = false;\n\n        if (!stateName || !stateValue) {\n            this._debug.error(\"Null parameters dispatched \");\n            return success;\n        }\n        if (typeof actionReference !== \"string\") {\n            this._debug.error(\"An action must be a string type\");\n            return success;\n        }\n\n        if (this._states.hasOwnProperty(stateName)) {\n            let state = this._states[stateName];\n\n            this._update(state, stateName, stateValue, actionReference);\n            this._notifysubscribers(state);\n\n            success = true;\n        } else {\n\n            this._create(stateName, stateValue, actionReference);\n\n            success = true;\n        }\n\n\n        this._persistanceSave();\n\n        return success;\n    }\n\n    subscribeWhenBecomesAlive(stateName, listener, unSubscribeCB) {\n        if (this._states.hasOwnProperty(stateName) && listener) {\n            return this.subscribe(stateName, listener);\n        } else {\n            return this._willSubscribeWhenAlive.push({ name: stateName, listener: listener, unSubscribeCB: unSubscribeCB });\n        }\n    }\n\n    subscribe(stateName, listener) {\n        if (this._states.hasOwnProperty(stateName) && listener) {\n\n            let state = this._states[stateName];\n            let index = state.subscribers.push({\n                listener: listener,\n                unSubscribeCB: undefined\n            });\n            this._a_history(state, \"Listener Subscribed\");\n            this._notifysubscribers(state);\n            return {\n                unSubscribe: () => { this._unSubscribe(stateName, index) }\n            };\n        } else {\n            this._debug.warn(stateName + \" does not exits yet... Cannot subscribe... :(\");\n            return false;\n        }\n    }\n\n    broadcastState(stateName) {\n        let success = false;\n        if (this._states.hasOwnProperty(stateName)) {\n            let state = this._states[stateName];\n            this._notifysubscribers(state);\n            success = true;\n        } else {\n            this._debug.warn(\"getCurrentState failed to find state, check your state name\")\n        }\n        return success;\n    }\n\n\n    getCurrentValue(stateName) {\n        if (this._states.hasOwnProperty(stateName)) {\n            let state = this._states[stateName];\n            return state.value;\n        } else {\n            return null;\n        }\n    }\n\n\n    deleteState(stateName) {\n        let success = false;\n        if (this._states.hasOwnProperty(stateName)) {\n            this._a_history(this._states[stateName], \"State Deleted\");\n            this._persistanceSave();\n            delete this._states[stateName];\n            success = !this._states[stateName];\n        } else {\n            this._debug.error(stateName + \" does not exits yet... Cannot delete\");\n        }\n        return success;\n    }\n\n    redo(stateName) {\n        let success = false;\n        if (this._settings.undoRedo && stateName && this._states.hasOwnProperty(stateName)) {\n            let state = this._states[stateName];\n            if (state.redoStack.length > 0) {\n                state.undoStack.push({ value: state.value, action: state.actionReference });\n                let s = state.redoStack.pop();\n                state.value = s.value;\n                state.actionReference = s.actionReference;\n                this._a_history(state, \"Redo\");\n                this.getCurrentState(stateName);\n                this._persistanceSave();\n                success = true;\n            }\n        }\n        return success;\n\n    }\n\n    undo(stateName) {\n        let success = false;\n        if (this._settings.undoRedo && stateName && this._states.hasOwnProperty(stateName)) {\n            let state = this._states[stateName];\n            if (state.undoStack.length > 0) {\n                state.redoStack.push({ value: state.value, action: state.actionReference });\n                let s = state.undoStack.pop();\n                state.value = s.value;\n                state.actionReference = s.actionReference;\n                this._a_history(state, \"Undo\");\n                this.getCurrentState(stateName);\n                this._persistanceSave();\n                success = true;\n            }\n\n        }\n        return success;\n    }\n\n\n\n\n    //Private\n\n    _unSubscribe(stateName, index) {\n        let success = false;\n        if (this._states.hasOwnProperty(stateName) && stateName && index) {\n            let state = this._states[stateName];\n            state.subscribers[index - 1] = null;\n            this._a_history(state, \"unSubcribed\");\n            success = true;\n        }\n        else {\n            this._debug.warn(stateName + \" does not exits yet... Cannot unSubcribe... :(\");\n        }\n        return success;\n    }\n\n    _create(stateName, stateValue, actionReference) {\n        let state = this._states[stateName] = {};\n\n        state.typeOfElement = typeof stateValue;\n        state.name = stateName;\n        state.value = stateValue;\n        if (this._willSubscribeWhenAlive.length > 0) {\n            this._willSubscribeCore(state);\n        } else {\n            state.subscribers = [];\n        }\n        state.action = actionReference;\n\n        if (this._settings.undoRedo) {\n            state.undoStack = [];\n            state.redoStack = [];\n        }\n        this._notifysubscribers(state);\n        this._a_history(state, \"Created\");\n    }\n\n\n\n    _update(state, stateName, stateValue, actionReference) {\n        if (!this._settings.typeMutable) {\n            if (state.typeOfElement !== typeof stateValue) {\n                this._debug.error(\"Error, mutability violated for: \" + state.name);\n                return;\n            }\n        } else {\n            state.typeOfElement = typeof stateValue;\n        }\n        if (this._settings.undoRedo) {\n            if (state.undoStack.length >= 100) {\n                state.undoStack.splice(parseInt(0, parseInt(state.undoStack.length / 2)));\n            }\n            state.undoStack.push({ value: state.value, action: state.actionReference });\n            state.redoStack = [];\n        }\n        state.value = stateValue;\n        state.action = actionReference;\n        this._a_history(state, \"Updated\");\n    }\n\n    _willSubscribeCore(state) {\n        //TODO: Refactor, 4X O(N)\n\n        //Extract will subcribe for this instance\n        let jedis = this._willSubscribeWhenAlive.filter((e) => { return e.name === state.name; });\n\n        //Remove jedis and update new queue.... BUG HERE\n        // this._willSubscribeWhenAlive = this._willSubscribeWhenAlive.filter((e) => { return jedis.indexOf(e) < 0 })\n\n        //Append to subscriber\n        state.subscribers = jedis.map((e) => {\n            return {\n                listener: e.listener,\n                unSubscribeCB: e.unSubscribeCB\n            }\n        });\n        //Notify new unsubcribe method.\n        state.subscribers.forEach((e, i) => {\n            try {\n                if (e.unSubscribeCB) {\n                    e.unSubscribeCB({\n                        unSubscribe: () => { this._unSubscribe(e.name, i) }\n                    });\n                }\n            } catch (o) {\n                this._debug.warn(o);\n            }\n        })\n\n    }\n\n    _notifysubscribers(state) {\n        if (state && state.subscribers.length > 0) {\n            for (var i = 0; i < state.subscribers.length; i++) {\n                try {\n                    if (state.subscribers[i] && state.subscribers[i].listener !== null) {\n                        state.subscribers[i].listener(state.value);\n                    }\n                }\n                catch (e) {\n                    this._debug.warn(state.subscribers[i].listener + \" No longer in scope\");\n                }\n            }\n            this._a_history(state, \"Notified Subscribers\");\n\n        }\n\n    }\n\n    _persistanceSave() {\n        if (this._settings.persistance.persist) {\n            let storage;\n            if (this._settings.persistance.session) {\n                storage = sessionStorage;\n            } else {\n                storage = localStorage;\n            }\n            try {\n                let data = {\n                    date: new Date(),\n                    states: this._states\n                };\n                storage.setItem(this._storageName, JSON.stringify(data));\n            } catch (e) {\n                console.log(e);\n            }\n        }\n    }\n\n    _persistanceLoad() {\n        if (this._settings.persistance.persist) {\n            let storage;\n            if (this._settings.persistance.session) {\n                storage = sessionStorage;\n            } else {\n                storage = localStorage;\n            }\n            try {\n                let results = storage.getItem(this._storageName);\n                if (results) {\n                    let data = JSON.parse(results);\n                    let date = new Date(data.date);\n                    date.setDate(date.getDate() + this._settings.timeAlive);\n                    if (date < new Date()) {\n                        storage.removeItem(this._storageName);\n                    } else {\n\n                        let s = Object.assign({}, data.states);\n                        for (let x in s) {\n                            s[x].subscribers = [];\n                        }\n                        this._states = s;\n                    }\n                }\n            } catch (e) {\n                this._debug.log(e);\n            }\n        }\n    }\n\n    _a_history(state, action) {\n        if (this._settings.actionsHistory) {\n            if (this._actions_history.length >= this._settings.actionsHistoryLimit) {\n                this._actions_history.splice(parseInt(0, parseInt(this._actions_history.length / 2)));\n            }\n            this._actions_history.push({\n                action: action,\n                state: Object.assign({}, state),\n                date: new Date()\n            });\n        }\n    }\n}\n\n\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/rehoard/components/rehoardpubsub.js\n **/","export default class ConsoleMessages {\n    constructor(production = false) {\n        this.production = production;\n    }\n    changeEnviroment(production = false) {\n        this.production = production\n    }\n    error(text) {\n        if (this.production) return;\n        console.error(text);\n    }\n    warn(text) {\n        if (this.production) return;\n        console.error(text);\n    }\n    info(text) {\n        if (this.production) return;\n        console.error(text);\n    }\n    log(text) {\n        if (this.production) return;\n        console.error(text);\n    }\n    debug(text) {\n        if (!this.production) return;\n        console.error(text);\n    }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/rehoard/components/consolemessages.js\n **/"],"sourceRoot":""}